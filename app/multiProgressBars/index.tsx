import { useState } from "react";
import ProgressBar from "./components/ProgressBar";
import TopBar from "./components/TopBar";

function MultiProgressBars(){
    
    const [timerIds, setTimerIds] = useState<Array<number>>([])
    const [noOfBars, setNoOfBars] = useState(0)

    const onAddPress= () => {
        setNoOfBars(num => (num+1))
    }

    const onResetPress = () => {
        timerIds?.forEach((intervalId) => clearInterval(intervalId))
        setTimerIds([])
        setNoOfBars(0)
    }

    const addIntervalId = (intervalId: number) => {
        setTimerIds([...timerIds, intervalId])
    }

    return <>
        <TopBar onAddPress={onAddPress} onResetPress={onResetPress} />
        {
            Array.from({length: noOfBars}, (_, i) => i).map((i) => <ProgressBar key={i} addIntervalId={addIntervalId} />)
        }
    </>
}

export default MultiProgressBars;






















































































































































































































































































































































